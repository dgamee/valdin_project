{% extends '../base.html' %}
{% load static %}

{% block page_title %}Product {% endblock page_title %}

{% block title %}Product / View Product{% endblock title %}

{% block content %}

<div class="col-lg-12 col-md-12 col-sm-12">
  <div class="row gx-5">
    <aside class="col-lg-4">
      <div class="rounded-4 mb-3 d-flex justify-content-center">
        <a data-fslightbox="mygalley" class="rounded-4" target="_blank" data-type="image" href="{{ product.image.url }}">
          <img style="max-width: 100%; max-height: 80vh; margin: auto;" class="rounded-4 fit" src="{{ product.image.url }}">
        </a>
      </div>
      <div class="d-flex justify-content-center mb-3">
        {% for image in product.product_images.all %}
          <a data-fslightbox="mygallery" class="border mx-1 rounded-2" target="_blank" data-type="image" href="{{ image.image.url }}">
            <img width="80" height="80" class="rounded-2" src="{{ image.image.url }}">
          </a>
        {% endfor %}
      </div>  
      <!-- thumbs-wrap.// -->
      <!-- gallery-wrap .end// -->
    </aside>
    <main class="card col-lg-6">
      <div class="card-body ps-lg-3">
        <br><br>
        <h4 class="title text-dark">
          {{ product.name }}
        </h4>
        <div class="d-flex flex-row my-3">
          <span class="text-muted"><i class="fas fa-shopping-basket fa-sm mx-1"></i>{{ product.quantity_left }}</span>
          <span class="text-success ms-2">In stock</span>
        </div>

        <div class="mb-3">
          <span class="h5">&#8358;<span class="h5" id="product-price">{{ product.price }}</span></span>
        </div>

        <p>
          {{ product.description }}
        </p>

        <hr>

        <div class="row mb-4">
          <!-- col.// -->
          <div class="col-md-4 col-6 mb-3">
            <label class="mb-2 d-block">Quantity</label>
            <div class="input-group mb-3" style="width: 170px;">
              <input min="1" max="{{ product.quantity_left }}" type="number" value="1" name="" id="product-quantity" class="form-control"/>
            </div>
            <div id="quantity-error" class="alert alert-danger d-none" role="alert">
              <!-- Error message will be displayed here -->
            </div>
          </div>
        </div>
        <div class="">
          <input type="hidden" value="{{ product.id }}" class="product-id" name="" id="" />
          <input type="hidden" value="{{ product.name }}" class="product-name" name="" id="" />
          <a href="{% url 'list_product' %}" class="btn btn-primary">Back</a>
          <a href="#" class="btn btn-info shadow-0"><i class="me-1 bi bi-cash-stack"></i>  Buy now </a>
          <button type="submit" id="add-to-cart-btn" href="#" class="btn btn-success shadow-0"> <i class="me-1 bi bi-cart4"></i> Add to cart </button>
        </div>
      </div>
    </main>
  </div>
</div>

<div class="col-lg-2 col-md-2 col-sm-2"></div>

<script src="{% static 'js/crm/product_detail/product_detail.js' %}"></script>
{% endblock %}

